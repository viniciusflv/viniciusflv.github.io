---
import type { MarkdownHeading } from 'astro';

export type Props = {
  headings: MarkdownHeading[];
};
const { headings } = Astro.props;
---

<ul class="list">
  {
    headings.map(({ depth, slug, text }, i) => (
      <li
        class="list-item"
        style={{
          '--list-item-depth': `${depth - 1}rem`,
        }}
      >
        <a class="action" title={text} href={`#${slug}`}>
          {text}
        </a>
      </li>
    ))
  }
</ul>

<style is:global>
  .list {
    .list-item {
      @keyframes slide {
        0% {
          @apply -translate-x-[var(--list-item-depth)];
        }
      }

      animation: slide 300ms 1;
      animation-timing-function: ease-in-out;

      @apply truncate pl-[var(--list-item-depth)];

      .action {
        @apply outline-none
        cursor-pointer
        text-xs
        active:text-inherit
        transition-colors
        delay-75
        ease-in-out;

        &:is(:focus, :hover) {
          @apply text-dracula-comment
          dark:text-dracula-green;
        }
      }
    }
  }
</style>
