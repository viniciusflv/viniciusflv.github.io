---
const { lang, knownLanguages } = Astro.props;
---

<script>
  const toggleLangBtns = document.querySelectorAll('.toggle-lang');
  Array.from(toggleLangBtns).map((toggleLangBtn) => {
    const lang = toggleLangBtn?.getAttribute('data-lang') || '';
    const knownLanguages =
      toggleLangBtn?.getAttribute('data-languages')?.split(',') || [];

    toggleLangBtn?.addEventListener('click', () => {
      window.location.pathname = window.location.pathname.replace(
        lang,
        knownLanguages.find((l) => l !== lang) || lang,
      );
    });
  });
</script>

<button
  class="toggle-lang"
  data-lang={lang}
  data-languages={knownLanguages}
  title={lang}
>
  {lang}
</button>

<style>
  .toggle-lang {
    @apply tracking-widest uppercase;
    @apply outline-none cursor-pointer
    active:text-inherit
    focus:text-dark-comment
    hover:text-dark-comment
    transition-colors
    delay-75
    ease-in-out;
  }
</style>
